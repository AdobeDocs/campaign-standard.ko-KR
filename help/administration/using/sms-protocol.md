---
solution: Campaign Standard
product: campaign
title: SMS 커넥터 프로토콜 및 설정
description: SMS 커넥터와 구성 방법에 대해 자세히 알아보십시오.
audience: administration
content-type: reference
topic-tags: configuring-channels
translation-type: tm+mt
source-git-commit: 458517259c6668e08a25f8c3cd3f193f27e536fb
workflow-type: tm+mt
source-wordcount: '8382'
ht-degree: 0%

---


# SMS 커넥터 프로토콜 및 설정 {#sms-connector-protocol}

>[!NOTE]
>
>**SMS 커넥터 프로토콜 및 Adobe Campaign Classic용 설정**&#x200B;은 이 [페이지](https://experienceleague.adobe.com/docs/campaign-classic/using/sending-messages/sending-messages-on-mobiles/sms-protocol.htmln#sending-messages)에서 찾을 수 있습니다.
>
>이 문서를 통해 프로토콜, 필드 이름 및 값에 대한 세부 사항에 대한 모든 참조는 [SMPP 3.4 사양](https://smpp.org/SMPP_v3_4_Issue1_2.pdf)을 참조하십시오.

## 개요 {#overview}

SMS는 형식이 없는 짧은 문자 메시지를 보내는 것으로 제한되지만 간단해 중요한 커뮤니케이션 채널입니다.

SMS를 보내는 주요 방법은 두 가지입니다.

* 사람 간에 직접 커뮤니케이션할 수 있는 일반적인 방법으로, 전화에서 수동으로 전송할 수 있습니다.

* Adobe Campaign에서 메시지를 보내는 방식과 인터넷에서 보낼 수 있습니다. 이를 위해서는 인터넷을 모바일 네트워크에 연결하는 SMS 서비스 공급자가 필요합니다.
Adobe Campaign은 SMPP 프로토콜을 사용하여 SMS를 서비스 제공업체에 보냅니다.

이 문서에서는 Adobe Campaign과 SMPP 공급자 간 연결을 설정하는 방법을 안내합니다.

SMPP 제공업체는 경우에 따라 공식 규격에서 벗어날 수 있지만 Adobe Campaign의 SMS 커넥터는 대부분의 제공업체와 호환되도록 동작을 조정할 수 있는 다양한 옵션을 제공합니다.

>[!IMPORTANT]
>
>새 공급자에 대한 연결을 설정하려면 TCP에 대한 지식, 이진, 16진수 표현 및 텍스트 인코딩에 대한 기술 지식이 필요할 수 있습니다. 또한 제공업체와 적극적인 협조가 필요할 것이다.

### SMS 유형 {#sms-types}

SMS를 통해 대량 SMS를 보낼 때 세 가지의 서로 다른 SMS가 있다.

* **SMS MT(모바일 종료됨)**:adobe campaign이 SMPP 공급자를 통해 휴대폰에 전송하는 SMS.

* **SMS MO(모바일 출처)**:모바일이 SMPP 제공업체를 통해 Adobe Campaign으로 전송하는 SMS.

* **SMS SR(상태 보고서) 또는 DR 또는 DLR(배달 영수증)**:SMPP 공급자를 통해 모바일이 Adobe Campaign으로 보낸 SMS가 성공적으로 수신되었음을 나타내는 확인 메시지입니다. Adobe Campaign은 종종 오류 설명과 함께 메시지를 배달할 수 없음을 나타내는 SR도 받을 수 있습니다.

감사의 말(RESP PDU, SMPP 프로토콜의 일부)과 SR을 구분해야 합니다.SR은 네트워크 종단간 전송을 통해 전송되는 일종의 SMS인 반면, 확보는 하나의 전송이 성공되었다는 확인일 뿐입니다.

감사의 말 및 SR 모두 오류를 트리거할 수 있으며, 두 가지를 구별하면 문제를 해결하는 데 도움이 됩니다.

### SMS {#information-sms}에 의해 전달된 정보

SMS는 문자보다 더 많은 정보를 전달한다. SMS에서 찾을 수 있는 내용 목록:

* 140바이트로 제한된 텍스트로서 인코딩에 따라 70-160자 사이의 텍스트입니다. 자세한 내용 및 제한 사항은 아래의 [SMS 텍스트 인코딩](../../administration/using/sms-protocol.md#sms-text-encoding)을 참조하십시오.

* 수신자 주소입니다(예: `ADC` 또는 `MSISDN`). SMS를 받을 수 있는 모바일 번호입니다.

* `oADC` 또는 `sender id`이라고도 할 수 있는 보낸 사람 주소입니다. 이는 제공업체 또는 이름을 통해 전송할 때 사용할 수 있는 전화 번호이거나 짧은 코드입니다. 이름은 선택 사항이므로 SMS에 회신할 수 없습니다.

* 메시지가 플래시 메시지인지 나타내는 플래그. 플래시 메시지는 메모리에 저장되지 않는 팝업입니다.

* SR이 필요한지 여부를 나타내는 플래그.

* 네트워크 장비를 재시도할 수 없는 유효 날짜입니다.

* 텍스트 인코딩을 나타내는 `data_coding` 필드입니다.

## SMPP 프로토콜 {#smpp-protocol}

Adobe Campaign Standard은 SMPP 프로토콜 버전 3.4를 지원합니다. 이는 SMSC(제공자)에 SMS를 전송하고 SMS와 영수증을 수신할 수 있도록 하는 광범위한 프로토콜입니다. 자세한 내용은 [SMPP 설명서](https://smpp.org/SMPP_v3_4_Issue1_2.pdf)를 참조하십시오.

SMS 서비스 제공업체 측의 네트워크 장비는 종종 SMSC라고 불립니다.

### SMPP 연결 {#smpp-connections}

Adobe Campaign은 TCP를 통해 SMS 서비스 공급자의 네트워크 장비에 연결합니다. SMPP 프로토콜은 Adobe Campaign에서 공급자에 대한 영구 TCP 연결을 설정합니다. TCP 연결은 메시지를 받기 위해 Adobe Campaign에서 항상 시작합니다.
SMPP는 해당 모드에 따라 1개 또는 2개의 TCP 연결을 엽니다. 모든 연결은 항상 Adobe Campaign에서 시작합니다.

SMPP 프로토콜은 다음 두 가지 모드에서 작동할 수 있습니다.

* **송신기+수신기(또는 TX+RX)**:메시지를 전송 및 수신하는 데 별도의 두 개의 TCP 연결이 사용됩니다.
* **트랜시버(TRX)**:단일 TCP 연결은 메시지를 전송하고 받는 데 사용됩니다.

>[!NOTE]
>
>TRX는 연결 수를 줄이고 오류 발생 시 연결 복구를 단순화하므로 Adobe Campaign Standard에 대해 선호됩니다.

### SMPP PDU {#smpp-pdu}

SMPP 전송 장치(&quot;패킷&quot;)를 PDU라고 합니다. **PDU**&#x200B;에는 명령, 상태, 시퀀스 번호 및 데이터가 포함되어 있습니다.

각 PDU는 `SMPP RESP PDU`(동기 응답)로 인식되어야 합니다. 요청을 파이프라인으로 지정할 수 있습니다.발신자는 `RESP`을 기다리지 않고 많은 명령을 보낼 수 있으며, 언제든지 파이프라인화할 수 있는 요청 수를 윈도우라고 합니다. `RESP PDU` 해당 이니시에이터 PDU의 순서와 관련이 없는 순서에 상관없이 도착할 수 있습니다.

분리된 **Transmitter+receiver** 모드에서 사용되는 연결은 전송된 메시지의 종류에 따라 달라집니다. 송신기 연결은 MT에 사용되고 수신기 연결은 MO와 SR에 사용됩니다. 각 유형의 메시지에 대한 요청 및 응답은 동일한 TCP 연결을 통해 전송됩니다.

예를 들어 MT를 전송할 때 전송기 연결이 사용되고 MT를 인식하는 `RESP`도 전송됨 채널을 통해 전송됩니다. MO(또는 SR)를 받으면 수신자 연결이 MO를 수신하고 MO를 인식하는 `RESP`를 전송하는 데 사용됩니다.

![](assets/do-not-localize/sms_protocol_1.png)

Adobe Campaign Standard에서 MT 및 SR 화해는 MTA가 기본적으로 제공되므로 SMS 전용 프로세스가 없습니다.

성공한 `SUBMIT_SM_RESP PDU`은(는) 전송 로그에서 &quot;sent&quot; 메시지 상태를 트리거하고 성공한 `DELIVER_SM (SR) PDU`은(는) &quot;수신&quot; 메시지 상태를 트리거합니다.

### 보안 측면 {#security-aspects}

프로토콜 자체는 암호화되지 않습니다. 대부분의 제공자는 Adobe Campaign 서버 IP 주소허용 목록에 추가하다를 공급자로 선언해야 하도록에서 IP 변형을 구현합니다.

Adobe Campaign은 바인딩 단계 중 로그인 및 암호 전달을 지원합니다. 또한 TLS를 통한 SMPP를 지원합니다. 적절한 보안을 위해서는 인증서가 필요하다는 점을 명시해야 한다. SMPP 커넥터는 인증서 확인을 무시할 수 있지만 인증서가 없는 TLS는 훨씬 낮은 보안 수준을 제공하므로 테스트에만 사용해야 합니다.

커넥터는 시스템 `openssl` 라이브러리에서 제공하는 기본 인증서를 사용합니다. 일반적으로 Debian의 `/etc/ssl/certs` 디렉토리에서 제공됩니다. 이 디렉토리는 기본적으로 &quot;ca-certificates&quot; 패키지에 의해 제공되지만 사용자 정의할 수 있습니다.

### 각 유형의 PDU {#information-pdu} 정보

각 유형의 PDU에는 서로 다른 정보를 전달하는 서로 다른 필드가 있습니다. 이러한 PDU는 [SMPP 3.4 사양](https://smpp.org/SMPP_v3_4_Issue1_2.pdf)에 자세히 설명되어 있습니다.

아래의 각 섹션에서는 PDU와 동기 응답(`*_RESP PDU`)을 모두 설명합니다. 모든 PDU는 해당 `RESP`에 의해 인식되어야 하며, 이것은 사양의 필수 부분입니다.

PDU에는 선택적 필드가 있을 수 있습니다. 여기에서 가장 일반적인 필드만 설명합니다. 자세한 내용은 [SMPP 3.4 사양](https://smpp.org/SMPP_v3_4_Issue1_2.pdf)을 참조하십시오.

#### BIND_TRANSMITTER / BIND_RECEIVER / BIND_TRISVER {#bind-transmitter}

이 PDU는 SMSC에 대한 연결을 시작하는 데 사용됩니다. **송신기**,  **** 수신 및  **** 트랜시버모드는 이 연결을 통해 전송될 수 있는 SMS의 종류만 변경합니다. 특히 다음과 같습니다.

| 모드 | 허용되는 SMS 종류 |
|:-:|:-:|
| 송신기 | MT |
| 수신자 | MO + SR |
| 트랜시버 | MT + MO + SR |

`BIND_* PDU`의 주목할 만한 필드:

* **system_id**:인증에 사용되는 로그인입니다. 외부 계정에서 설정합니다.

* **암호**:인증에 사용되는 암호입니다. 외부 계정에서 설정합니다.

* **system_type**:일부 공급자에 대한 특정 값으로 설정해야 합니다. 모든 버전에서 사용할 수 있는 외부 계정에 설정합니다. 서로 다른 유형의 계약서, 채널, 국가 등을 구분하는 경우가 많습니다.

* **addr_** tonand  **addr_npi**:일부 공급자가 필요합니다. 외부 계정의 `Bind TON` 및 `Bind NPI` 설정으로 설정합니다.

* **address_range**:일부 공급자가 필요합니다. 대부분의 경우 이 연결에 허용된 바로 가기 코드 목록입니다. 외부 계정에서 설정합니다.

`BIND_*_RESP` 에 특정 필드가 없으면 연결이 성공했는지 확인합니다.

#### {#unbind} 바인딩 해제

이 PDU는 연결을 끊기 전에 시스템에 의해 전송되어야 합니다. 연결을 닫기 전에 일치하는 `UNBIND_RESP PDU`을 기다려야 합니다.

SMSC를 준수하는 TCP 연결은 연결을 닫지 않아야 합니다. TCP 연결은 Adobe Campaign 커넥터에 의해 제어됩니다.

#### SUBMIT_SM {#submit-sm}

이 PDU는 SMSC로 MT를 전송합니다. 응답 PDU는 MT의 ID를 제공합니다.

`SUBMIT_SM PDU`의 주목할 만한 필드:

* **service_type**:일부 공급자가 필요합니다. 배달 속성에서 설정합니다.

* **source_addr_** tonand  **source_addr_npi**:전송되는 소스 주소의 종류를 나타냅니다. 이 필드의 의미는 표준화되지만 일부 제공자는 이 필드를 다르게 사용하기 때문에 공급자에게 올바른 값을 요청해야 합니다. 외부 계정에서 설정합니다.

* **source_addr**:MT의 원본 주소/ADC. 휴대폰에 전시될 예정입니다 외부 계정 및 배달에 설정하면 배달에 있는 값이 외부 계정의 값보다 우선합니다.

* **dest_addr_** tonand  **dest_addr_npi**:전송할 대상 주소 종류를 나타냅니다(예: 로컬 또는 국제 형식). 이 필드의 의미는 표준화되지만 일부 제공자는 이 필드를 다르게 사용하기 때문에 공급자에게 올바른 값을 요청해야 합니다. 외부 계정에서 설정합니다.

* **destination_addr**:수신자 주소, 전화번호 또는 MSISDN.

* **esm_class**:텍스트 필드에 UDT가 사용되는지 여부를 지정하는 데 사용됩니다. `message_payload` 모드가 사용되지 않는 경우 SMS 분할을 위해 커넥터에서 자동으로 활성화됩니다.

* **priority_flag**:이 메시지의 우선 순위를 다른 메시지보다 높게 지정합니다. 이것은 배달 자체의 우선순위에 연결되어 있습니다.

* **validity_period**:다시 시도를 하지 않을 타임스탬프. 배달 자체에 설정합니다.

* **registered_delivery**:SR이 요청되었는지 여부를 나타냅니다. Adobe Campaign은 자동 답글을 제외하고 항상 이 플래그를 설정합니다. 다중 부분 메시지의 경우 플래그는 첫 번째 부분에 대해서만 설정됩니다. 모든 버전은 동일한 비헤이비어를 갖습니다.

* **data_coding**:텍스트 필드에 사용된 인코딩을 나타냅니다. 자세한 내용은 [SMS 텍스트 인코딩](../../administration/using/sms-protocol.md#sms-text-encoding) 섹션을 참조하십시오.

* **short_message**:메시지의 텍스트입니다. UHD를 사용하는 경우 UHD 헤더도 포함됩니다.

Adobe Campaign은 다음과 같은 선택 필드를 지원합니다.

* **dest_addr_subunit**:SMS의 대상을 지정하는 데 사용됩니다.flash, 모바일 또는 SIM 카드. 배달 속성에서 설정합니다.

* **message_payload**:외부 계정에서 활성화되면 단일 PDU로 긴 메시지가 전송되고 필드가 아닌 이 필드에 텍스트가  `short_message` 전송됩니다.

#### SUBMIT_SM_RESP {#submit-sm-resp}

이 PDU에는 MT의 ID가 포함됩니다. 이는 수신 SR과 일치시키는 데 유용합니다.

>[!IMPORTANT]
>
>많은 공급자가 16진수로 MT ID를 전송합니다. 외부 계정에서 **ID 형식을 MT 확인** 설정으로 올바르게 설정했는지 확인하십시오.

일부 공급자는 SR을 보낸 후 `SUBMIT_SM_RESP`을(를) 보냅니다. 이러한 행동을 고려하여 Adobe Campaign은 알 수 없는 ID가 있는 SR에 **잘못된 메시지 ID**&#x200B;에 답하기 전에 30초를 기다립니다.

#### DELIVER_SM {#delivery-sm}

이 PDU는 SMSC에 의해 Adobe Campaign으로 전송됩니다. 여기에는 MO 또는 SR 중 하나가 포함되어 있습니다.

대부분의 필드는 `SUBMIT_SM` 상대와 동일한 의미를 갖습니다. 다음은 유용한 필드 목록입니다.

* **source_addr**:MO/SR의 출처 주소. 보통 이것은 전화 번호입니다.

* **destination_addr**:MO 또는 SR을 받은 짧은 코드.

* **esm_class**:PDU가 MO 또는 SR인지 확인하는 데 사용됩니다.

* **short_message**:메시지의 텍스트입니다. SR의 경우 SMPP 프로토콜 사양의 부록 B에 설명된 데이터가 포함됩니다. 자세한 내용은 [SR 오류 관리](../../administration/using/sms-protocol.md#sr-error-management)를 참조하십시오.

Adobe Campaign은 일부 구성 조정을 사용하여 `receipted_message_id` 선택 필드에서 메시지 ID를 읽을 수 있습니다.

#### DELIVER_SM_RESP {#deliver-sm-resp}

이 PDU는 Adobe Campaign이 SR 및 MO를 확인하도록 전송됩니다.

모든 처리 단계가 성공적으로 수행되면 Adobe Campaign Standard은 `DELIVER_SM_RESP`만 보냅니다. 따라서 처리 오류 위험이 있는 동안 SR 또는 MO는 확인되지 않습니다.

#### INQUIRE_LINK {#enquire-links}

이 PDU는 연결이 라이브인지 확인하는 데만 사용됩니다. 공급자의 요구에 따라 주파수를 설정해야 합니다.

기본 60초는 외부 계정에 설정된 대부분의 구성과 일치해야 합니다.

#### INQUIRE_LINK_RESP {#enquire-links-resp}

이 PDU는 연결이 활성 상태임을 확인합니다.

### 다중 부분 SMS(긴 SMS) {#multipart}

여러 부분으로 이루어진 SMS 또는 긴 SMS는 여러 부분으로 보내지는 SMS입니다. 모바일 네트워크 프로토콜의 기술적 제한으로 인해 SMS는 140바이트보다 크지 않거나 분할해야 합니다. SMS에 맞는 문자 수에 대한 자세한 내용은 [SMS 텍스트 인코딩](../../administration/using/sms-protocol.md#sms-text-encoding) 섹션을 참조하십시오.

긴 메시지의 각 부분은 개별 SMS입니다. 이 부품들은 네트워크를 통해 독립적으로 이동하며 수신 휴대폰으로 조립된다. 다시 시도 및 연결 문제를 처리하기 위해 Adobe Campaign은 이러한 부품을 역순으로 보내고 메시지의 첫 번째 부분인 마지막 보낸 부분에만 SR을 요청합니다. 휴대폰은 첫 번째 부품을 받을 때만 메시지를 표시하므로 다른 부분에 대한 재시도가 휴대 전화에서 중복되지 않습니다.

**배달 템플릿**&#x200B;에 있는 **메시지당 최대 SMS 수** 설정을 사용하여 메시지당 최대 SMS 수를 배달에 설정할 수 있습니다. SMS가 너무 긴 오류 이유로 보내는 동안 이 제한을 초과하는 메시지가 실패합니다.

긴 SMS를 보내는 방법은 두 가지입니다.

* **UDD**:긴 메시지를 보내는 기본 및 권장 방법입니다. 이 모드에서는 커넥터가 UDD 정보가 있는 여러 `SUBMIT_SM PDU`s로 메시지를 분할합니다. 이 프로토콜은 휴대폰 자체에서 사용하는 것입니다. 즉, Adobe Campaign은 메시지 생성을 가장 효과적으로 제어할 수 있으므로 전송된 부품의 수와 분할 방법을 정확하게 계산할 수 있습니다.

* **message_payload**:긴 메시지를 단 한 번에 전송하는 방법 `SUBMIT_SM PDU`으로 제공업체는 분할해야 하므로 Adobe Campaign은 얼마나 많은 부품을 보냈는지 정확히 알 수 없습니다. 일부 제공업체는 이 모드를 요구하지만 UDD를 지원하지 않는 경우에만 이 모드를 사용할 것을 권장합니다.

프로토콜 및 형식에 대한 자세한 내용은 [SUBMIT_SM PDU](../../administration/using/sms-protocol.md#information-pdu)의 `esm_class`, `short_message` 및 `message_payload` 필드에 대한 설명을 참조하십시오.

### 처리량 매핑 및 윈도우 {#throughput-capping}

대부분의 제공업체는 각 SMPP 연결에 대해 처리량 제한을 요구합니다. 외부 계정에 SMS 수를 설정하여 이를 수행할 수 있습니다. 처리량 조절은 연결당 발생하며, 총 유효 처리량은 연결당 제한과 총 연결 수를 곱한 것입니다. 이것은 [동시 연결](../../administration/using/sms-protocol.md#connection-settings) 섹션에 자세히 설명되어 있습니다.

가능한 처리량을 최대화하려면 최대 전송 창을 미세 조정해야 합니다. 전송 창은 `SUBMIT_SM_RESP`을(를) 기다리지 않고 보낼 수 있는 `SUBMIT_SM PDU`의 수입니다. 자세한 내용은 [보내기 창 설정](../../administration/using/sms-protocol.md#throughput-timeouts) 섹션을 참조하십시오.

### SR 및 오류 관리(&quot;부록 B&quot;) {#sr-error-management}

SMPP 프로토콜은 `RESP PDU`s에서 표준 동기 오류를 정의하지만 SR에 대한 오류 코드는 정의하지 않습니다. 각 제공업체는 자체 오류 코드를 의미와 함께 사용합니다.

권장 사항은 [SMPP 프로토콜 사양](https://smpp.org/SMPP_v3_4_Issue1_2.pdf)(167페이지)의 부록 B 섹션에서 작성되지만 실제 오류 코드와 의미가 나열되지는 않습니다.

오류 관리에 맞게 Adobe Campaign의 브로드캐스트 메시지 시스템을 활용하여 오류 및 심각도(하드, 소프트 등)를 적절하게 프로비저닝했습니다.

위에서 언급한 바와 같이, 두 가지 다른 유형의 오류가 있습니다.

* 메시지를 SMSC에 보낸 직후 발생하는 `SUBMIT_SM_RESP`의 동기 응답
* 메시지가 수신되거나 메시지 시간이 초과되었을 때 훨씬 나중에 나타날 수 있는 영수증. 이 경우 SR에서 오류가 발견되었습니다.

SR이 수신되면 해당 `short_message` 필드에서 상태 및 오류를 찾을 수 있습니다(예: 부록 B 일치 구현). PDU의 `short_message` 필드는 MT에 텍스트가 포함되어 있으므로 종종 **텍스트 필드**&#x200B;라고 합니다. SR의 경우 기술 정보와 **Text**&#x200B;이라는 하위 필드가 포함됩니다. 이 2개의 필드는 서로 다르며 `short_message`은(는) 실제로 **Text** 필드와 기타 정보를 포함합니다.

#### SR 텍스트 필드 형식 {#sr-text-field-format}

SR 텍스트 필드에 이 형식을 사용하는 것이 좋습니다. 필드 이름과 값을 구분하는 것은 콜론으로 구분된 하위 필드 목록입니다. 필드 이름은 대/소문자를 구분하지 않습니다.

부록 B 권장 사항과 일치하는 SR 텍스트 필드의 예:

```
id:1234567890 sub:001 dlvrd:001 submit date:1608011415 done date:1608011417 stat:DELIVRD err:000 Text:Hello Adobe world
```

id 필드는 `SUBMIT_SM_RESP PDU`에서 받은 ID로서 MT를 확인합니다.

`sub` 또한  `dlvrd` 배달된 부품 및 배달된 메시지의 양을 계산해야 하지만 브로드캐스트 시스템이 더 효과적이고 통합된 정보를 제공하므로 Adobe Campaign은 이를 사용하지 않습니다.

`submit date` 및  `done date` 필드는 MT가 전송되고 SR이 모바일에 의해 전송되었을 때를 나타내는 타임스탬프를 나타냅니다. 표준 시간대 또는 잘못된 날짜 세트가 있는 모바일에 의한 잘못된 타임스탬프에 일부 문제가 있을 수 있습니다.

통계 필드는 메시지의 상태를 알려주기 때문에 중요합니다. 중요한 상태는 `DELIVRD`, `UNDELIV` 및 `REJECTD`뿐입니다. `DELIVRD` 상태는 성공을 나타내고 나머지 2는 오류를 나타냅니다. 다른 값은 사용할 수 있지만 일반적으로 MT가 모바일 통신사에 도달했지만 휴대 전화는 아닌 중간 알림입니다. 이러한 중간 알림은 Adobe Campaign에서 무시됩니다.

오류 필드에는 공급자별 오류 코드가 포함되어 있습니다. 이 값을 해석할 수 있도록 제공자는 가능한 오류 코드 테이블을 의미와 함께 제공해야 합니다.

마지막으로 텍스트 필드에는 일반적으로 MT의 텍스트 시작 부분이 포함됩니다. 이 값은 Adobe Campaign에서 무시되며 일부 공급자는 PII 누출 및 네트워크 대역폭 사용을 방지하기 위해 전송하지 않습니다. 이 필드는 문제 해결 중에 이 필드를 읽고 테스트 MT와 일치하는 SR을 보다 쉽게 찾을 수 있습니다.

### Adobe Campaign Standard Extended 일반 SMPP {#sr-processing}의 SR 처리 예

이 예는 부록 B 권장 사항, 외부 계정의 기본값 및 성공적인 SMS MT에 따른 구현 사례를 표시합니다.

```
id:1234567890 sub:001 dlvrd:001 submit date:1608011415 done date:1608011417 stat:DELIVRD err:000 Text:Hello Adobe world
```

먼저 `id extraction` regex를 적용하여 ID를 추출하고 해당 MT와 대사합니다.

그런 다음 `status extraction` regex 및 `error code extraction` regex가 이러한 필드를 추출하는 데 적용되며 문자열에 추가됩니다.

이 정보로 브로드로그 메시지가 생성되고 참조용으로 원본 변경되지 않은 문자열이 추가됩니다.

```
SR ExampleProvider DELIVRD 000|MESSAGE=id:1234567890 sub:001 dlvrd:001 submit date:1608011415 done date:1608011417 stat:DELIVRD err:000 Text:Hello Adobe world
```

그런 다음 메시지가 표준화되어 동일한 상태 및 오류 코드와 여러 메시지를 일치시킬 수 있도록 MESSAGE 부분을 제거합니다.

```
SR ExampleProvider DELIVRD 000|#MESSAGE#
```

메시지가 아직 브로드캐스트 메시지 테이블에 제공되지 않으면 전체 메시지를 **firstText** 및 정규화된 메시지로 사용하여 새 항목이 만들어집니다. 그런 다음 커넥터는 success 및 `error` regex를 사용하여 성공인지 실패인지 확인합니다.

* 이 값이 `success` regex와 일치하면 성공으로 간주됩니다.

* `error` 정규와 일치하는 경우 메시지는 오류로 간주됩니다.

* 이 두 regex가 일치하지 않으면 SR이 무시됩니다. Adobe Campaign에서 처리하지 않는 중간 알림일 수 있습니다.

기본적으로 모든 오류는 소프트 오류로 제공됩니다. 이것은 하드 오류를 직접 프로비저닝해야 한다는 것을 의미합니다.

### SMS 텍스트 인코딩 {#sms-text-encoding}

인코딩 문제가 발생하면 **항상 SMSC 공급자에게 문의하십시오**. SMSC 공급자만 지원하는 인코딩에 대한 정확한 지식과 기술 플랫폼의 제한 사항으로 인해 적용될 수 있는 특수 규칙을 알고 있습니다.

SMS 메시지는 GSM7 인코딩이라고 하는 특수 7비트 인코딩을 사용합니다.

SMPP 프로토콜에서 GSM7 텍스트가 문자당 8비트로 확장되어 문제를 쉽게 해결할 수 있습니다. SMSC는 모바일로 전송되기 전에 문자당 7비트로 묶습니다. 즉, SMS의 `short_message` 필드는 SMPP 프레임에서 최대 160바이트의 길이가 될 수 있지만 모바일 네트워크에서 보낼 때는 140바이트로 제한됩니다.

인코딩 문제가 발생하면 확인할 수 있는 중요한 사항이 있습니다.

* 인코딩에 속한 문자를 알고 있어야 합니다. GSM7에서는 발음 부호(악센트)를 완전히 지원하지 않습니다. 특히 프랑스어로, 엑시와 프랑스가 GSM7의 일부지만, 혹은 그렇지 않다. 스페인어도 마찬가지다.

* 세디야(c) 가 있는 C는 GSM7 알파벳의 대문자에만 표시되지만 일부 휴대폰은 더 낮은 대소문자 또는 &quot;스마트&quot; 케이스에서 렌더링된다. 일반적인 권장 사항은 세디아를 완전히 피하고 세디야 또는 UCS-2로 전환하는 것입니다.

* **SMSC 공급자가 명시적으로 요청하지 않는 한** SMS에서 ASCII를 사용하지 마십시오. 이 인코딩은 GSM7보다 8비트 문자를 사용하고 범위를 줄여서 공간을 절약합니다. 이 인코딩은 북미에 사용되는 CDMA 네트워크에는 필요할 수 있습니다.

* 라틴-1이 항상 지원되는 것은 아닙니다. Latin-1을 사용하기 전에 SMSC 공급자와의 호환성을 확인하십시오.

* 국가 언어 이동 표는 Adobe Campaign 커넥터에서 지원되지 않습니다. 대신 UCS-2 또는 다른 `data_coding`를 사용해야 합니다.

* UCS-2와 UTF-16은 종종 휴대폰에 의해 혼합됩니다. UCS-2에 없는 이모지 및 기타 문자를 사용하는 경우 이 문제가 발생합니다.

* 대부분의 휴대폰에는 모든 UCS-2 문자에 대한 글꼴 글리프가 없습니다. 스마트폰은 희귀 캐릭터를 비교적 쉽게 보여줄 수 있는 경향이 있지만, 피처폰은 일반적으로 그들이 구입한 국가의 모국어로 유용한 것에 대한 지원을 제한한다. emoji 또는 ASCII-art를 사용하려면 보내기 전에 다양한 휴대폰에서 테스트하십시오. Adobe Campaign 미리 보기는 누락된 글리프를 시뮬레이션하지 않으며 웹 브라우저에서 사용할 수 있는 심볼을 표시합니다.

`data_coding` 필드는 사용할 인코딩을 알려줍니다. 중요한 문제는 값 0이 사양에서 기본 SMSC 인코딩을 의미하며 일반적으로 GSM7을 참조합니다. Adobe Campaign에서만 지원하는 `data_coding` = 0과 연결된 인코딩을 SMSC 파트너에게 문의하십시오. 다른 `data_coding` 값은 사양을 따르는 경향이 있지만 SMSC 공급자와 확인하는 유일한 방법은 확인할 수 있습니다.

메시지의 최대 크기는 인코딩에 따라 다릅니다. 이 표는 모든 관련 정보를 요약한 것입니다.

| 인코딩 | 일반적인 data_coding | 메시지 크기(문자) | 여러 부분으로 구성된 SMS의 부품 크기 | 사용 가능한 문자 |
|:-:|:-:|:-:|:-:|:-:|
| GSM7 | 0 | 160년 | 152년 | GSM7 기본 문자 세트 + 확장(확장 문자 2자) |
| 라틴-1 | 3 | 140년 | 134년 | ISO-8859-1 |
| UCS-2 <br>UTF-16 | 8 | 70 | 67 | 유니코드(전화마다 다름) |

## SMPP 외부 계정 매개 변수 {#SMPP-parameters-external}

각 SMPP 프로토콜 구현에는 다양한 변화가 있습니다. 호환성 및 적응성을 향상시키기 위해 SMPP 커넥터의 동작을 변경하는 데 사용할 수 있는 설정이 많습니다. 이 섹션에서는 커넥터에 대한 모든 매개 변수와 그 효과에 대해 설명합니다.

### 일반 매개 변수 및 라우팅 {#general-parameters-routing}

**이 계정에 대한 MTA 인스턴스 제한**

SMPP 공급자에 연결할 수 있는 MTA 인스턴스 수로 제한을 설정할 수 있습니다. 이 확인란을 선택하면 최대 사용 가능한 MTA 수를 지정할 수 있습니다.

이 옵션을 사용하면 연결 수를 보다 정밀하게 제어할 수 있습니다. [동시 연결](../../administration/using/sms-protocol.md#connection-settings)을 참조하십시오.

실행 중인 MTA 수보다 큰 값을 설정하면 모든 MTA가 정상적으로 실행됩니다.이 옵션은 제한일 뿐이며 추가 MTA를 생성할 수 없습니다.

연결 수(예: 공급자 요구 사항)를 정확하게 제어해야 하는 경우 현재 배포의 실행 중인 MTA 수가 올바른 경우에도 이 옵션을 항상 설정하는 것이 좋습니다. 이후에 추가 MTA를 추가하는 경우 연결 제한은 계속 유지됩니다.

### 연결 설정 {#connection-settings}

#### SMPP 연결 모드 {#smpp-connection-mode}

**트랜시버** 모드 또는 분리된 **transmitter+receiver** 모드로 연결을 설정합니다. 분리된 **송신기+receiver** 모드로 전환하는 경우, **SMPP 연결 모드** 섹션의 설정은 송신기에 적용되고 **수신기 연결 설정** 섹션의 설정은 수신자에 대해 다른 매개 변수 사용&#x200B;**확인란을 선택한 경우에만 수신자 연결에 적용됩니다.**

#### SMSC 구현 이름 {#smsc-implementation-name}

SMSC 구현의 이름을 설정합니다. 공급자 이름으로 설정해야 합니다. 이 필드에 추가할 내용을 알려면 관리자 또는 제공 팀에 문의하십시오. 이 필드의 역할은 [SR 오류 관리](../../administration/using/sms-protocol.md#sr-error-management) 섹션에 설명되어 있습니다.

#### 서버 {#server}

연결할 서버의 DNS 이름 또는 IP 주소입니다.

#### 포트 {#port}

연결할 TCP 포트입니다.

#### 계정 {#account}

연결의 로그인. BIND PDU의 `system_id` 필드에 전달됩니다.

#### 암호 {#password}

SMPP 연결의 암호입니다. BIND PDU의 암호 필드에 전달됩니다.

#### 시스템 유형 {#system-type}

BIND PDU의 `system_id` 필드에 전달된 값입니다. 일부 제공업체는 여기에서 특정 값을 필요로 합니다.

#### 동시 연결 {#simultaneous-connections}

Adobe Campaign Standard에서는 SMS 스레드와 MTA 프로세스당 연결 수를 정의합니다.
MTA 프로세스 수는 배포에 따라 결정됩니다.일반적으로 MTA 2개와 스레드 1개가 있습니다. smppConnectorThreads 설정을 사용하여 config-instance.xml 파일에서 스레드 수를 변경할 수 있습니다. 일반적으로 컨테이너당 MTA 프로세스가 1개 있고 MTA 프로세스당 스레드가 1개 있습니다.

Adobe Campaign Standard에 대한 총 연결 공식:

* **총 연결 수 = 동시 연결 * 스레드 수 * MTA 수**

외부 계정에서 동시 연결이 설정되고 config-instance.xml 파일(smppConnectorThreads)에 스레드 수가 설정되며 외부 계정에서 MTA 수를 제한할 수 있습니다.

분리된 **transmitter/receiver** 모드에서 위의 연결 수는 **transmitter/receiver** 쌍의 수를 나타냅니다. 즉, 총 연결 수의 두 배가 됩니다.

#### SMPP {#enable-TLS}에 대한 TLS 사용

TLS를 사용하여 공급자에 연결합니다. 연결이 암호화됩니다. TLS 연결은 OpenSSL 라이브러리에서 관리하며 OpenSSL에 해당되는 모든 내용은 이 연결에 적용됩니다.

#### 로그 파일 {#enable-verbose-log-file}에서 자세한 SMPP 추적을 활성화합니다.

이 설정은 모든 SMPP 트래픽을 로그 파일에 저장합니다. 처음 설정하는 동안 매개 변수를 조정해야 하는 경우가 많습니다. 커넥터를 문제 해결할 때 공급자가 보는 트래픽과 비교할 때 이 기능을 활성화해야 합니다.

### 받는 사람 연결 설정 {#receiver-connection}

이 섹션은 분리된 **송신기+receiver** 모드에서만 볼 수 있습니다.

#### 받는 사람 {#receiver-parameters}에 대해 다른 매개 변수를 사용합니다.

상자를 선택 취소하면 송신기와 수신기에 동일한 설정이 사용됩니다.

이 확인란을 선택하면 **연결 설정** 섹션의 설정이 전송자에게 적용되고 **수신자 연결** 설정의 설정이 수신자에게 적용됩니다.

**받는 사람 서버, 포트, 계정, 암호, 시스템 유형**

이러한 설정은 **송신기+receiver** 모드에 있을 때 수신기에 적용됩니다. 그것들은 송신기 부분처럼 작동하며, 더 자세한 내용은 상기를 참조하십시오.

### SMPP 채널 설정 {#smpp-channel-settings}

#### 문자 변환 허용 {#allow-character-transliteration}

음역은 누락된 문자와 동등한 문자를 찾는 프로세스입니다. 예를 들어 프랑스어 &quot;려&quot;(곡절 악센트 포함) 문자가 GSM 인코딩에서 누락되었지만 가독성을 저해하지 않고 &quot;e&quot;로 대체할 수 있습니다.

이 상자를 선택 취소하면 문자열을 그대로 인코딩할 수 없는 경우 텍스트 인코딩이 실패합니다.

이 상자를 선택하면 텍스트 인코딩은 실패하지 않고 문자열을 대략적인 버전으로 변환하려고 합니다. 일부 문자가 대상 인코딩에 적합하지 않을 경우 텍스트 인코딩이 실패합니다.

인코딩 프로세스에 대한 보다 일반적인 설명은 [인코딩 설정](../../administration/using/sms-protocol.md#SMSC-specifics)의 특정 매핑 정의를 참조하십시오.

#### 들어오는 MO를 데이터베이스 {#incoming-mo-storing}에 저장

활성화되면 들어오는 MO가 데이터베이스의 inSMS 테이블에 저장됩니다. 이 테이블은 워크플로우의 쿼리 활동을 사용하여 쿼리할 수 있습니다.

#### SR 처리 중 실시간 KPI 업데이트 사용 {#real-time-kpi}

이 옵션이 활성화되면 오류 SR을 받을 때 기본 배달 페이지에서 실시간으로 KPI가 업데이트됩니다.

그 단점은 데이터베이스 경합 때문에 성능이 낮을 수 있습니다. 비활성화되면 20분마다 실행되는 **syncfowmexec** 워크플로우로 통계가 업데이트됩니다.

#### 소스 번호 {#source-number}

메시지의 기본 소스 주소를 정의합니다. 이 설정은 소스 번호가 전달에 비어 있는 경우에만 적용됩니다.

기본적으로 소스 번호 필드는 전달되지 않으므로 공급자가 이 필드를 짧은 코드로 바꿉니다.

이렇게 하면 보낸 사람 주소/ADC 재정의 기능이 활성화됩니다.

#### 짧은 코드 {#short-code}

계정의 기본 짧은 코드를 나타냅니다. 이 계정에 여러 개의 짧은 코드를 사용하거나 짧은 코드를 알 수 없는 경우 이 필드를 비워 두십시오.

짧은 코드를 지정하는 것은 다음 두 가지 기능에 유용합니다.

* 소스 번호를 제공하지 않으면 미리 보기에 짧은 코드가 표시됩니다. 휴대전화의 실제 작동 방식을 반영할 것이다.

* 자동 응답 기능차단 목록에 추가하다의 설정은 특정 짧은 코드에 대해 사용자를 격리하는 경우에만 보냅니다.

#### 소스 톤/NPI, 대상 톤/NPI {#ton-npi}

TON(숫자 유형) 및 NPI(번호 매기기 계획 표시기)는 [SMPP 3.4 사양](https://smpp.org/SMPP_v3_4_Issue1_2.pdf)(117페이지)의 섹션 5.2.5에 설명되어 있습니다. 이러한 값은 공급자의 요구에 맞게 설정해야 합니다.

`SUBMIT_SM PDU`의 `source_addr_ton`, `source_addr_npi`, `dest_addr_ton` 및 `dest_addr_npi` 필드에 있는 그대로 전송됩니다.

#### 서비스 유형 {#service-type}

이 필드는 `SUBMIT_SM PDU`의 `service_type` 필드에 있는 그대로 전송됩니다. 공급자의 요구에 맞게 설정합니다.

### 처리량 및 시간 초과 {#throughput-timeouts}

이러한 설정은 SMPP 채널의 모든 시간 설정을 제어합니다. 일부 제공업체는 메시지 속도, 창 및 다시 시간 설정을 매우 정확하게 제어해야 합니다. 이러한 설정은 공급자의 용량과 계약 조건에 맞는 값으로 설정해야 합니다.

#### {#sending-window} 창을 보내는 중

창은 일치하는 `SUBMIT_SM_RESP`을(를) 기다리지 않고 보낼 수 있는 `SUBMIT_SM PDU`의 수입니다.

최대 창이 4인 전송 예:

![](assets/do-not-localize/sms_protocol_2.png)

이 창은 네트워크 링크에 높은 대기 시간이 있을 때 처리량을 늘리는 데 도움이 됩니다.  다음 메시지를 보내기 전에 커넥터가 `SUBMIT_SM_RESP`을 기다리지 않도록 윈도우의 값은 SMS/s 수와 링크의 지연 시간을 초 단위로 곱해야 합니다.
창이 너무 크면 연결 문제가 발생할 경우 중복 메시지를 더 많이 보낼 수 있습니다. 또한, 대부분의 제공자들은 윈도우에 매우 엄격한 제한을 가지고 있으며 한계를 넘는 메시지를 거절합니다.

최적의 전송 창 공식을 계산하는 방법:

* `SUBMIT_SM`과 `SUBMIT_SM_RESP` 사이의 최대 대기 시간을 측정합니다.

* 이 값을 최대 MT 처리량에 초 단위로 곱합니다. 최적의 전송 창 값을 제공합니다.

예:최대 MT 처리량에 300개의 SMS/s가 설정되어 있고 평균 `SUBMIT_SM`과 `SUBMIT_SM_RESP` 사이에 100ms 지연이 있는 경우 최적의 값은 `300×0.1 = 30`입니다.

#### 최대 MT 처리량 {#max-mt-throughput}

초당 및 연결당 최대 MT 수입니다. 이 설정은 엄격하게 적용되며, MTA는 이 제한보다 빠르게 메시지를 푸시하지 않습니다. 정밀한 조절이 필요한 공급자에 유용합니다.

총 처리량 제한을 확인하려면 위의 공식에 자세히 설명된 총 연결 수에 이 수를 곱하십시오.

0은 제한이 없다는 것을 의미하며, MTA는 가능한 빨리 MT를 보낼 것이다.

최종 아키텍처와 특별히 요청한 SMPP 공급자에서 적절히 벤치마크 테스트하지 않는 한 이 수보다 정확한 처리량을 보장할 수 없으므로 이 설정을 1000으로 유지하는 것이 좋습니다. 1000MT 이상으로 연결되도록 연결 수를 늘리는 것이 좋습니다.

#### 다시 연결 전 시간 {#time-reconnection}

TCP 연결이 끊어지면 커넥터는 연결을 시도하기 전에 이 시간(초)을 기다립니다.

#### MT {#expiration-period}의 만료 기간

`SUBMIT_SM`과(와) 일치하는 `SUBMIT_SM_RESP` 사이의 시간 초과입니다. `RESP`이(가) 제 시간에 수신되지 않으면 메시지는 실패로 간주되고 MTA의 글로벌 재시도 정책이 적용됩니다.

#### 바인딩 시간 초과 {#bind-timeout}

TCP 연결 시도와 `BIND_*_RESP` 응답 사이의 시간 초과입니다. 시간이 초과되면 연결이 Adobe Campaign 커넥터로 닫히고 다시 연결하기 전에 다시 연결을 기다립니다.

#### inquire_link period {#enquire-link-period}

`enquire_link` 이 PDU는 연결 상태를 유지하기 위해 전송된 특수한 유형의 PDU입니다. 이 기간은 초 단위입니다. 연결이 유휴 상태일 때만 캠페인 커넥터가 대역폭을 절약하기 위해 `enquire_link`만 전송합니다. 이 기간 이후에 RESP를 받지 못하면 연결이 죽은 것으로 간주되고 다시 연결 프로세스가 트리거됩니다.

### SMSC 세부 사항 {#SMSC-specifics}

이러한 설정은 Adobe Campaign 커넥터를 대부분의 SMPP 구현 특성에 맞게 조정하는 고급 설정입니다.

#### 인코딩의 특정 매핑 정의 {#encoding-specific-mapping}

텍스트 인코딩에 대한 자세한 내용은 [SMS 텍스트 인코딩](../../administration/using/sms-protocol.md#sms-text-encoding) 섹션을 참조하십시오.

이 설정을 사용하면 사양과 다른 사용자 정의 인코딩 매핑을 정의할 수 있습니다. 인코딩 목록을 `data_coding` 값과 함께 선언할 수 있습니다.

MTA는 목록의 첫 번째 인코딩을 사용하여 인코딩하려고 합니다. 오류가 발생하면 목록에서 다음 인코딩을 사용합니다. 메시지를 인코딩하는 데 인코딩할 수 없는 경우 오류가 발생합니다. 인코딩이 발견되면 MTA는 인코딩된 텍스트와 표에 지정된 값으로 설정된 `SUBMIT_SM PDU` 필드를 만듭니다.`data_coding`

표의 항목 순서는 중요합니다.인코딩은 위쪽에서 아래쪽으로 시도합니다. 가장 저렴하거나 가장 추천된 인코딩을 목록의 맨 위에 놓고, 그 다음에 더 비싼 인코딩을 사용해야 합니다.

UCS-2는 Adobe Campaign에서 지원되는 모든 문자를 인코딩할 수 있고 UCS-2 SMS의 최대 길이가 매우 짧으므로 실패하지 않습니다.70자만 가능합니다.

이 설정을 사용하면 매핑 테이블에서 1행만 선언하여 특정 인코딩을 항상 사용하도록 할 수도 있습니다.

확인란을 선택하지 않을 때 사용되는 기본 매핑은 다음 표와 같습니다.

| data_coding | 인코딩 |
|---|---|
| 0 | GSM |
| 9 | UCS-2 |

즉, MTA는 GSM에서 메시지를 인코딩하려고 시도합니다. 성공하면 `data_coding`이(가) 0으로 설정된 상태로 전송됩니다.

메시지를 GSM에서 인코딩할 수 없는 경우 UCS-2로 인코딩되고 `data_coding`을 8로 설정합니다.

#### message_payload {#enable-message-payload} 사용

선택 취소하면 긴 SMS가 MTA로 분할되고 UDD가 있는 여러 `SUBMIT_SM PDU`s로 전송됩니다. 메시지는 UDD 데이터 다음에 휴대 전화로 다시 구성됩니다.

이 확인란을 선택하면 긴 SMS가 하나의 SUBMIT_SM PDU에 전송되어 message_payload 옵션 필드에 텍스트를 입력합니다. 자세한 내용은 [SMPP 사양](../../administration/using/sms-protocol.md#ACS-SMPP-connector)을 참조하십시오.

이 기능이 활성화되어 있으면 Adobe Campaign에서 SMS 부분을 개별적으로 카운트할 수 없습니다.모든 메시지는 한 부분으로 전송된 것으로 계산됩니다.

#### 전체 전화 번호 {#send-full-phone-number} 보내기

이 확인란을 선택하지 않으면 전화 번호의 숫자만 제공자에게 전송됩니다(`SUBMIT_SM` 필드의 `destination_addr` 필드). SMPP에서 국제 번호 표시기(일반적으로 + 접두어)가 TON 및 NPI 필드로 대체되기 때문에 이 동작이 기본 동작입니다.

확인란을 선택하면 전화 번호가 사전 처리 및 잠재적 공백 없이 그대로 전송되고 + 접두어 또는 파운드/해시/별 기호가 표시됩니다.

이 기능은 자동 응답 기능 동작에도 영향을 차단 목록 줍니다.확인란을 선택하지 않으면 SMPP 프로토콜 자체에 의해 전화 번호에서 제거되는 + 접두어를 보상하기 위해 + 접두어가 격리 표에 삽입된 전화 번호에 추가됩니다.

#### TLS 인증서 확인 건너뛰기 {#skip-tls}

TLS가 활성화되면 모든 인증서 확인을 건너뜁니다.

이 확인란을 선택하면 연결이 더 이상 안전하지 않으므로 프로덕션에서 활성화되어서는 안 됩니다.

이 기능은 디버깅 또는 테스트 목적으로 유용합니다.

#### TON/NPI {#bind-ton-npi} 바인딩

[SMPP 3.4 사양](https://smpp.org/SMPP_v3_4_Issue1_2.pdf)(117페이지)의 섹션 5.2.5에 설명된 TON(번호 유형) 및 NPI(번호 매기기 계획 표시기) 이러한 값은 공급자가 필요한 대로 설정해야 합니다.

BIND PDU의 `addr_ton` 및 `addr_npi` 필드에 있는 그대로 전송됩니다.

#### 주소 범위 {#address-range}

BIND PDU의 address_range 필드에 있는 s-is로 전송됩니다. 이 값은 공급자가 필요한 대로 설정해야 합니다.

#### 잘못된 ID 인식 개수 {#invalid-id}

단일 SR에 대해 보낼 수 있는 **메시지 ID가 잘못된** `DELIVER_SM_RESP` 수를 제한합니다.

**이 값은 작업 영역으로 문제 해결** 목적으로만 사용해야 하며 일반 조건에서 0으로 설정해야 합니다.

Fox 예:

* 공급자가 ID가 &quot;1234&quot;인 SR(`DELIVER_SM`)을 전송합니다.

* 데이터베이스에서 ID &quot;1234&quot;를 찾을 수 없습니다.

* 커넥터는 해당 ID에 대해 잘못된 ID **오류를 1개 계산하므로 &quot;메시지 ID가 잘못되었습니다&quot; 오류 코드(일반 비헤이비어)로 `DELIVER_SM_RESP`를 전송합니다.**

* 공급자가 ID가 &quot;1234&quot;인 동일한 SR을 재시도합니다.

* 데이터베이스에서 ID &quot;1234&quot;를 여전히 찾을 수 없습니다.

* 커넥터는 해당 ID에 대해 잘못된 ID **오류를 2개 계산하므로 올바르게 처리되지 않았더라도 `DELIVER_SM_RESP` &quot;OK&quot;를 전송합니다.**

* 이 기능은 메시지를 처리할 수 없다는 잘못된 SR 블록이 올바르지 않은 경우 공급자 측의 SR 버퍼를 플러시하기 위한 것입니다.

이 필드를 0으로 설정하면 **메시지 ID invalid**&#x200B;가 항상 반환되는 메커니즘이 비활성화되며 이는 일반적인 동작입니다.

이 필드를 1로 설정하면 ID가 잘못된 경우에도 커넥터는 항상 &quot;확인&quot;을 응답합니다. 문제 해결을 위해 감독 하에 1로 설정하고, 예를 들어, 공급자 측 문제로부터 복구하는 등의 최소 시간 동안 이 값을 설정해야 합니다.

#### SR {#regex-extraction}에 있는 ID의 추출 참조

SR 형식은 SMPP 프로토콜 사양에 의해 엄격하게 적용되지 않습니다. 이것은 사양 [부록 B](../../administration/using/sms-protocol.md#sr-error-management)(167페이지)에 설명된 권장 사항일 뿐입니다. 일부 SMPP 구현자는 이 필드의 형식을 다르게 지정하므로 Adobe Campaign에서 올바른 필드를 추출하는 방법이 필요합니다.

기본적으로 `id:` 뒤에 최대 10개의 영숫자를 캡처합니다.

regex에는 괄호 안에 부품이 포함된 캡처 그룹이 하나만 있어야 합니다. 괄호가 ID 부분을 둘러싸야 합니다. regex 형식은 PCRE입니다.

이 설정을 조정할 때는 잘못된 트리거를 방지하기 위해 가능한 한 많은 컨텍스트를 포함해야 합니다. 표준에는 `id:`과 같은 특정 접두사가 있을 경우 해당 접두어를 regex에 포함하십시오. 단어 중간에 텍스트를 캡처하지 않도록 단어 구분 기호(\b)도 가능한 한 많이 사용합니다.

regex에 충분한 컨텍스트를 포함하지 않는 경우 다음과 같은 작은 보안 결함을 발견할 수 있습니다.메시지의 실제 내용은 SR에 포함될 수 있습니다. 컨텍스트가 없는 특정 ID 형식만 일치시키는 경우(예: UUID) 실제 텍스트 컨텐츠를 구문 분석해야 할 수 있습니다. 예를 들어 ID 대신 텍스트 필드에 UUID가 포함되어 있습니다.

#### 성공/오류 상태 {#regex-applied} 결정에 적용된 정규화

알 수 없는 상태/오류 필드 조합이 있는 메시지가 표시되면 이러한 regex가 시작 필드에 적용되어 SR이 성공했는지 아니면 오류가 있는지 확인합니다. 이러한 레저와 일치하지 않는 통계 값이 있는 SR은 무시됩니다.

기본적으로 `DELIV`로 시작하는 시작 값(예:[부록 B](../../administration/using/sms-protocol.md#sr-error-management)의 `DELIVRD`은 성공적으로 배달된 것으로 간주되며 오류가 일치하는 모든 통계 값(예: )으로 간주됩니다.`REJECTED`, `UNDELIV`는 오류로 간주됩니다.

#### MT 확인 시 ID 형식 {#id-format-mt}

이것은 `SUBMIT_SM_RESP PDU`의 `message_id` 필드에서 반환되는 ID의 형식을 나타냅니다.

* **수정** 안 함:ID는 ASCII 인코딩 텍스트로 데이터베이스에 있는 그대로 저장됩니다. 사전 처리나 필터링이 발생하지 않습니다.

* **소수점**:ID는 ASCII 형식의 십진수 숫자여야 합니다. 이 설정을 사용하면 선행 및 후행 공백 및 선행 0이 제거됩니다.

* **16진수**:ID는 0x나 후행 h가 없는 ASCII 형식의 16진수 숫자여야 합니다.그런 다음 ID가 데이터베이스에 저장되기 전에 소수점으로 변환됩니다.

* **16진수 문자열**:ID는 16진수로 인코딩된 바이트 문자열 자체인 ASCII 인코딩 텍스트여야 합니다. 예를 들어 PDU에서 `0x34 0x31 0x34 0x32 0x34 0x33`를 찾을 수 있으며, 이 경우 ASCII &quot;414243&quot;로 변환됩니다. 그런 다음 이 문자열은 16진수 바이트 문자열로 디코딩되고 결과적으로 &quot;ABC&quot;를 얻게 됩니다.ID &quot;ABC&quot;를 데이터베이스에 저장합니다.

#### SR {#id-format-sr}의 ID 형식

이것은 SR에서 ID의 `Extraction` regex에 의해 캡처된 ID의 형식을 나타냅니다. 값은 위의 MT의 형식과 같은 의미와 비헤이비어를 가집니다.

**선택적 필드의 SR ID 또는 오류 코드**

이 확인란을 선택하면 선택적 필드의 내용이 위의 등록으로 처리되는 텍스트에 추가됩니다. 텍스트에는 `0xTAG:VALUE`, `0xTAG` 형식이 태그의 4자리 16진수 값(예:`0x002E`.

예를 들어 `receipted_message_id` 필드에서 ID를 캡처할 수 있습니다. 이 확인란을 선택하면 다음 텍스트가 상태에 추가됩니다.

```
0x001E:05e3299e-8d37-49d0-97c6-8e4fe60c7739
```

이 예에서 0x001E는 선택적 필드의 태그이고 UUID는 필드의 값입니다.

이제 이 값을 캡처하기 위해 SR 필드에서 ID의 추출 레게에 다음 regex를 설정할 수 있습니다.

```
\b0x001E:([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})\b
```

>[!IMPORTANT]
>
>텍스트(ASCII/UTF-8) 값이 있는 선택적 필드만 캡처할 수 있습니다. 특히 현재 regex 시스템에서는 이진 필드를 안정적으로 캡처할 수 없습니다.

**텍스트 필드의 SR ID 또는 오류 코드**

이 확인란을 선택하면 SR의 상태 텍스트를 처리하는 동안 **텍스트** 필드가 유지됩니다.

이 기능은 공급자가 ID 또는 상태와 같은 중요한 데이터를 이 필드에 배치하는 경우에 유용합니다. 일반적으로 이 필드는 ASCII가 아닌 인코딩이 포함된 텍스트를 포함하고 정규식 처리를 방해할 수 있으므로 안전하게 삭제할 수 있습니다.

이 옵션을 활성화하면 SR 필드에 있는 ID의 `Extraction` regex가 충분하지 않을 경우 매우 작은 보안 결함이 발생할 수 있습니다. **Text** 필드의 내용을 ID로 구문 분석할 수 있으며 침입자가 위조 ID를 주입하는 데 사용할 수 있으며 이로 인해 서비스 거부(DoS) 상황이 발생할 수 있습니다.

**서비스 ID 태그**

사용자 정의 TLV를 추가할 수 있습니다. 이 필드는 태그 부분을 설정합니다. 이 값은 전달의 고급 매개 변수에 있는 **서비스 또는 프로그램 ID** 값에 전달당 사용자 지정할 수 있습니다.

이 설정은 메시지당 하나의 TLV 옵션만 추가할 수 있습니다.

### MO에 자동 답장 보내기 {#automatic-reply}

이 기능을 사용하면 MO에 신속하게 텍스트를 회신할 수 있고 차단 목록으로 보내는 단문별 코드를 처리할 수 있습니다.

**키워드** 및 **짧은 코드** 열은 자동 회신을 트리거하는 조건을 정의합니다. 두 필드가 모두 일치하면 MO가 전송되고 추가 작업이 트리거됩니다. 와일드카드를 지정하려면 필드를 비워 두어야 합니다. 키워드는 MO 텍스트의 첫 번째 영숫자 단어와 일치하며 구두점 및 행간 공백은 무시합니다. 즉, **키워드** 필드는 공백을 포함할 수 없으며 단일 단어여야 합니다.

**키워드** 설정은 접두어입니다. 예를 들어 &quot;AD&quot;를 지정하면 &quot;AD&quot;, &quot;ADAPT&quot; 및 &quot;ADOBE&quot;과 일치합니다. 공통 접두어가 있는 여러 개의 키워드가 있는 경우 키워드가 위에서 아래로 처리되므로 주문에 주의를 기울여야 합니다.

**응답** 열은 답글을 달 텍스트입니다. 이 필드에 개인화를 사용할 수 없습니다. 이 필드를 비워 두면 메시지가 표시되지 않지만 추가 작업이 트리거됩니다.

**추가 작업** 열은 **키워드** 및 **짧은 코드** 일치 시 추가 작업을 제공하며 빈 짧은 코드는 모든 짧은 코드와 일치합니다. 격리 또는 검역에서 제거할 수 있습니다. 단, 텍스트에 대한 응답은 없습니다. **추가 작업**&#x200B;을 지정했지만 **응답** 필드를 비워 두면 작업이 실행되지만 응답이 전송되지 않습니다. 격리는 지정된 짧은 코드에 대해서만 적용되며, 필드가 비어 있는 경우 모든 짧은 코드에 적용됩니다.

>[!IMPORTANT]
>
>전체 전화 번호 보내기 설정은 자동 응답 격리 메커니즘의 동작에 영향을 줍니다.전체 전화 번호를 선택하지 않은 경우 검역에 표시된 전화 번호는 국제 전화 번호 형식과 호환되도록 더하기 기호(&quot;+&quot;)에 접두사로 추가됩니다.

한 개의 규칙이 일치할 때까지 테이블의 모든 항목은 지정된 순서로 처리됩니다. 여러 규칙이 MO와 일치하면 맨 위의 규칙만 적용됩니다.

## SMS 배달 템플릿 매개 변수 {#sms-delivery-template-parameters}

일부 매개 변수는 배달 템플릿별로 설정할 수 있습니다.

### 시작 필드 {#from-field}

이 필드는 선택 사항입니다. 보낸 사람 주소(ADC)를 덮어쓸 수 있습니다. 이 필드의 내용은 `SUBMIT_SM PDU`의 `source_addr` 필드에 있습니다.

이 필드는 SMPP 사양의 경우 21자로 제한되지만 일부 제공업체는 더 긴 값을 허용할 수 있습니다. 또한 길이, 컨텐트, 허용되는 문자 등의 일부 국가에서는 매우 엄격한 제한 사항을 적용할 수 있습니다.

### 게재 매개 변수 {#delivery-parameters}

#### 메시지당 최대 SMS 수 {#maximum-sms}

이 설정은 **메시지 페이로드** 설정이 비활성화된 경우에만 작동합니다. 이에 대한 자세한 내용은 이 [페이지](../../administration/using/configuring-sms-channel.md)를 참조하십시오. 메시지에 이 값보다 더 많은 SMS가 필요한 경우 오류가 트리거됩니다.

SMS 프로토콜은 SMS를 255개로 제한하지만, 어떤 휴대폰은 10개 이상의 부분과 긴 메시지를 서로 연결하는 데 어려움을 겪고 있으며, 그 제한이 정확한 모델에 따라 다릅니다. 메시지 한 건당 5개 부분을 넘지 않는 것이 좋습니다.

Adobe Campaign에서 개인화된 메시지가 작동하는 방식을 통해 메시지의 크기가 달라질 수 있습니다. 많은 양의 긴 메시지가 전달되면 전송 비용이 늘어날 수 있습니다.

#### 전송 모드 {#transmission-mode}

이 필드는 전송할 SMS 종류를 나타냅니다.일반 또는 플래시 메시지, 모바일 또는 SIM 카드에 저장

이 설정은 `SUBMIT_SM PDU`의 `dest_addr_subunit` 선택 필드에서 전송됩니다.

* **지정하지** 않으면 PDU에 선택적 필드가 없습니다.

* **Flashflashset** the value to 1. 이는 모바일에 팝업되어 메모리에 저장되지 않는 플래시 메시지를 전송합니다.

* **정규화** 는 값을 0으로 설정합니다. 일반 메시지를 보냅니다.

* **모바일세트에서** 저장을 누르면 값이 2로 설정됩니다. 그것은 전화기에 SMS를 내부 메모리에 저장하도록 지시한다.

* **종료 시** 저장은 값을 3으로 설정합니다. 심카드에 SMS를 저장하라고 적혀 있어요

#### 유효 기간 {#validity-period}

유효 기간은 `SUBMIT_SM PDU`의 `validity_period` 필드에 전송됩니다. 날짜는 항상 절대 UTC 시간 형식 형식으로 지정되며 날짜 필드는 &quot;00+&quot;로 끝납니다.

## SMPP 커넥터 {#ACS-SMPP-connector}

![](assets/do-not-localize/sms_protocol_3.png)

화살표는 데이터 흐름을 나타냅니다.

여기서 주목해야 할 가장 중요한 것은 여러 개의 SMPP 커넥터 스레드가 있다는 것입니다. 이러한 스레드는 모두 동일하며 동일한 구성을 공유합니다. 따라서 연결 수에 스레드 수를 항상 곱합니다.

구성 파일을 변경해야 하므로 고객이 스레드 수를 변경할 수 없습니다.

### SMPP 커넥터 {#behavior-smpp-connector}의 비헤이비어에 대한 설명

#### MT, SR 및 방송 로그 항목 일치 {#matching-mt-sr}

Adobe Campaign에서 메시지는 브로드캐스트 항목입니다. Adobe Campaign Standard에서 외부 커넥터는 작업 브로드캐스트 테이블에 대해서만 알아야 합니다.`nmsBroadLogExec`. 워크플로우는 브로드로그 항목을 특정 타깃팅 차원(nmsBroadLogXXX)으로 다시 복사하는 작업을 담당합니다.

SMPP는 다음과 같은 메시지와 함께 ID를 보낼 수 없습니다.공급자가 각 MT에 MT ID를 제공한 다음 하나 이상의 SR에 동일한 ID를 제공합니다.

공급자가 지정한 ID는 `nmsBroadLogExec` 테이블의 `sProviderId` 열에 저장됩니다. MT가 성공적으로 전송되고 인식된 후 SR은 항상 도착하지만, Adobe Campaign에서 뛰어난 SR으로 알려져 있으므로 때때로 주문 처리가 되지 않을 수 있습니다. 처리 스레드는 전체 정보가 도착할 때까지 이러한 SR을 일시적으로 RAM에 저장합니다.

MT가 인식되면(`SUBMIT_SM_RESP`) `sProviderId`이 데이터베이스에서 즉시 업데이트됩니다.

각 SR은 SMPP 처리 스레드로 개별적으로 처리됩니다. 이 프로세스는 의사-동기 프로세스입니다.외부에서는 동기식으로 보이지만 이벤트 기반 구현을 통해 내부적으로 구현됩니다. SR은 SR이 거부되는 오류가 발생하는 경우 브로드로그가 성공적으로 업데이트될 때만 인식됩니다.

각 SR에 적용되는 프로세스는 다음과 같습니다.

* regex를 사용하여 SR의 ID가 추출됩니다.
* ID가 `nmsBroadLogExec:sProviderId`에서 검색됩니다.
* 상태 + 오류 코드는 regex를 사용하여 SR에서 추출됩니다.
* 브로드캐스트 메시지 메커니즘은 오류를 분류하고 브로드로그 메시지 ID를 찾는 데 사용됩니다.
* 브로드로그는 위의 모든 정보로 업데이트됩니다.
* SR은 인정된다.

위의 단계를 검사하려면 모든 단계가 올바르게 적용되었는지 수동으로 확인하려면 **자세한 SMPP 추적 활성화**&#x200B;가 필요합니다. Adobe Campaign이 새 SMPP 공급자에 연결할 때마다 이 값이 필요합니다.

## 라이브되기 전 {#checklist}

이 검사 목록은 라이브하기 전에 확인해야 할 항목의 목록을 제공합니다. 설치가 완료되지 않으면 많은 문제가 발생할 수 있습니다.

### 외부 계정 충돌 확인 {#external-account-conflict}

이전 SMS 외부 계정이 없는지 확인하십시오. 테스트 계정을 비활성화한 상태로 두면 프로덕션 시스템에서 다시 활성화하여 잠재적인 충돌을 생성할 위험을 실행합니다.

동일한 Adobe Campaign 인스턴스에 동일한 공급자에 연결하는 계정이 여러 개 있는 경우 해당 계정이 계정 간에 실제로 연결되는지 확인하려면 공급자에게 문의하십시오. 동일한 로그인 계정이 여러 개 있으면 추가 구성이 필요합니다.

### 검사 중 자세한 SMPP 추적 사용 {#enable-verbose}

확인 중에 항상 자세한 SMPP 추적을 활성화해야 합니다.
직접 로그를 확인할 수 없는 경우에도 지원 센터에서 도와 주는 것이 더 쉽습니다.

### SMS {#test} 테스트

* **모든 유형의 문자를**
사용하여 문자 전송GSM이 아닌 문자 또는 비ASCII 문자로 SMS를 보내야 하는 경우, 가능한 한 많은 다양한 문자로 메시지를 보내 보세요. 사용자 정의 문자 매핑 테이블을 설정하는 경우 가능한 모든 것에 대해 하나 이상의 SMS를 전송합니다. 
`data_coding` values.

* **SR이 제대로**
처리되었는지 확인SMS가 배달 로그에 수신됨으로 표시되어야 합니다. 배달 로그는 성공적이며 다음과 같아야 합니다.

배달 공급자 이름을 변경했는지 확인합니다. 배달 로그는 절대 포함하지 않아야 합니다.    `SR yourProvider stat=DELIVRD err=000|#MESSAGE`
배달 공급자 이름을 변경했는지 확인합니다. 배달 로그는 프로덕션 환경에 **SR 일반**&#x200B;을(를) 포함해서는 안 됩니다.

* **MO가**
처리되었는지 확인MO를 처리해야 하는 경우(자동 응답, 데이터베이스에 MO를 저장하는 등) 몇 가지 테스트를 해 보세요. 모든 자동 회신 키워드에 대해 SMS를 몇 장 보내고 응답이 몇 초 내에 충분한지 확인합니다.
Adobe Campaign이 성공적으로 답글을 남길 로그를 확인합니다. 
`DELIVER_SM_RESP` (command_status=0).

### PDU {#check-pdus} 확인

메시지가 올바르게 표시되더라도 PDU 형식이 올바른지 확인하는 것이 중요합니다.

이 단계는 이전에 Adobe Campaign에 연결되어 있지 않은 공급자에 연결할 때 필요합니다.

#### 바인딩 {#bind}

`BIND_* PDUs`이(가) 올바르게 전송되었는지 확인합니다. 확인해야 할 가장 중요한 것은 공급자가 항상 성공 `BIND_*_RESP PDUs`(command_status = 0)을 반환한다는 것입니다.

`BIND_* PDU`이(가) 너무 많지 않은지 확인하십시오.너무 많은 경우 연결이 불안정함을 나타낼 수 있습니다. 자세한 내용은 [불안정한 연결 문제](../../administration/using/sms-protocol.md#issues-unstable-connection) 섹션을 참조하십시오.

#### INQUIRE_LINK {#enquire-link-pdus}

연결이 유휴 상태일 때 `ENQUIRE_LINK PDU`s가 정기적으로 교환되는지 확인하십시오.

#### SUBMIT_SM / DELIVER_SM {#submit-sm-deliver-sm}

메시지를 보낸 다음 로그에서 해당 `SUBMIT_SM`, `SUBMIT_SM_RESP`, `DELIVER_SM` 및 `DELIVER_SM_RESP PDU`s를 검색합니다.

`SUBMIT_SM PDU` 사용:

* `data_coding`이(가) 올바른지, 기본적으로 0인지 확인하십시오.
* `short_message`이(가) 올바르게 인코딩되었는지 확인합니다. 여러 인코딩을 지원하는 16진수 변환기를 사용하여 디코딩해 봅니다.

`SUBMIT_SM_RESP PDU` 사용:

* 성공, command_status = 0인지 확인합니다.
* 바디에 올바른 형식의 ID가 있고 그 뒤에 &#39;0&#39;바이트가 있는지 확인합니다.

`DELIVER_SM PDU` 사용:

* 16진수 `short_message` 필드를 디코딩합니다.
* SR에서 ID의 `Extraction` regex에 정의된 regex가 정확히 하나의 캡처 그룹을 반환하고 메시지에 전체 ID를 캡처하는지 재추적 확인 도구를 확인합니다.
* 추출된 ID가 `SUBMIT_SM_RESP`의 ID와 일치하는지 확인합니다.
* SR의 상태(`Extraction` regex에 정의된 regex가 통계 필드의 내용을 반환하는지 확인합니다.
* SR에서 오류의 `Extraction`에 정의된 regex가 오류 필드의 내용을 반환하는지 확인합니다.

`DELIVER_SM_RESP PDU` 사용:

* `DELIVER_SM PDU`을 받은 후(일반적으로 1초 미만) 빠르게 전송되었는지 확인합니다.
* 성공, command_status = 0인지 확인합니다.

### {#provider}이(가) 모두 정상인지 공급자에게 질문합니다.

SMS가 성공적이라 하더라도 공급자에게 문의하여 모든 것이 제대로 작동하는지 확인하십시오.

### 자세한 SMPP 추적 비활성화 {#disable-verbose}

모든 검사가 완료되면 마지막 작업은 로그를 너무 많이 생성하지 않도록 **자세한 SMPP 추적 비활성화**&#x200B;하는 것입니다. 프로덕션 시스템에서도 문제 해결을 위해 다시 활성화할 수 있습니다.
